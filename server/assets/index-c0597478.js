import{j as e,c as T,r as c}from"./index-923edbfe.js";import{r as v,i as _}from"./createSvgIcon-466f8574.js";import{g as q}from"./get-d367012c.js";import{p as S}from"./post-3758e0f3.js";import{B as u}from"./Button-868de5de.js";import"./createSvgIcon-a7a5a494.js";import"./axios-4a70c6fc.js";const D="_wrapper_1xvrp_1",I={wrapper:D,"input-group":"_input-group_1xvrp_16","input-group-field":"_input-group-field_1xvrp_27","input-group-info":"_input-group-info_1xvrp_34","label-inp-img":"_label-inp-img_1xvrp_40"};var g={},F=_;Object.defineProperty(g,"__esModule",{value:!0});var h=g.default=void 0,M=F(v()),R=e,O=(0,M.default)((0,R.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");h=g.default=O;var x={},$=_;Object.defineProperty(x,"__esModule",{value:!0});var y=x.default=void 0,z=$(v()),B=e,E=(0,z.default)((0,B.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");y=x.default=E;const d=T.bind(I),i=({title:t,children:n,info:o})=>e.jsxs("div",{className:d("input-group"),children:[e.jsx("label",{htmlFor:n.props?n.props.id??"":"",children:e.jsxs("b",{className:"text-warning",children:[t," ",e.jsx("span",{className:"text-danger",children:n.props&&n.props.required?"*":""})]})}),e.jsx("div",{className:d("input-group-field"),children:n}),o?e.jsx("span",{className:d("input-group-info"),children:o}):null]}),b={title:"",categories:[],description:"",author:"",keywords:[],file:null,image:null},U=()=>{const[t,n]=c.useState(b),[o,f]=c.useState(""),[m,w]=c.useState([]),[N,j]=c.useState(!1),l=a=>{n({...t,[a.target.name]:a.target.type==="file"?a.target.files[0]:a.target.value})};c.useEffect(()=>{q("api/categories").then(a=>w(a))},[]);const k=a=>{a.preventDefault(),j(!0);const r=new FormData;Object.entries(t).map(([s,p]=entry)=>{switch(s){case"file":case"image":r.append(s,p,p.name);break;case"categories":r.append(s,p.map(C=>m[C].id));break;default:r.append(s,p);break}}),S("documents/upload",r).then(s=>{s.status==="200"&&(alert("Upload tài liệu thành công"),n(b),j(!1))})};return e.jsxs("form",{className:d("wrapper"),method:"POST",onSubmit:k,children:[e.jsxs("section",{className:"border border-warning bg-warning",children:[e.jsx(i,{title:"Tên tài liệu",info:"Quyết định 80% SEO",children:e.jsx("input",{type:"text",name:"title",id:"title",className:"form-control",placeholder:"Tối thiểu 10 kí tự",minLength:10,value:t.title,onChange:l,required:!0})}),e.jsxs(i,{title:"Danh mục",info:"",children:[t.categories.map((a,r)=>e.jsx(u,{size:"small",variant:"outlined",endIcon:e.jsx(h,{}),onClick:()=>{n({...t,categories:(()=>(t.categories.splice(r,1),t.categories))()})},children:m[a].name},r)),e.jsxs("select",{name:"categories",id:"categories",className:"form-select",onChange:a=>{n({...t,categories:(()=>(t.categories.push(a.target.value-0),t.categories))()})},required:!0,children:[e.jsx("option",{hidden:!0,children:"--Chọn danh mục--"}),m.map((a,r)=>t.categories.includes(r-0)?null:e.jsx("option",{value:r,children:a.name},r))]})]}),e.jsx(i,{title:"Mô tả ngắn",info:"Tối ưu từ 70 - 200 kí tự",children:e.jsx("textarea",{name:"description",className:"form-control",placeholder:"Tối thiểu 70 kí tự",maxLength:200,value:t.description,onChange:l,required:!0})}),e.jsx(i,{title:"Tác giả",info:"",children:e.jsx("input",{type:"text",name:"author",className:"form-control",placeholder:"Tên tác giả gốc của tài liệu",value:t.author,onChange:l,required:!0})}),e.jsxs(i,{title:"Từ khóa",info:"Tối đa 6 từ khóa",children:[t.keywords.map((a,r)=>e.jsx(u,{size:"small",variant:"outlined",endIcon:e.jsx(h,{}),onClick:()=>{n({...t,keywords:(()=>(t.keywords.splice(r,1),t.keywords))()})},children:a},r)),e.jsxs("div",{className:"d-flex",children:[e.jsx("input",{type:"text",name:"keywords",className:"form-control",placeholder:"Tối thiểu 3 từ khóa",value:o,onChange:a=>{f(a.target.value)}}),e.jsx(u,{className:"ms-2",variant:"contained",onClick:()=>{t.keywords.length<6&&n({...t,keywords:(()=>(t.keywords.push(o.trim(" ")),t.keywords))()}),f("")},children:"Thêm"})]})]}),e.jsx(i,{title:"File tài liệu",info:"",children:e.jsx("input",{name:"file",id:"file",type:"file",accept:"application/pdf, .pdf, application/msword, .doc, .docx, application/vnd.ms-powerpoint, .ppt, .pptx",onChange:l,required:!0})}),e.jsxs(i,{title:"Hình ảnh về tài liệu",info:"Hoàn thành đầy đủ thông tin giúp code của bạn được nhiều người biết đến và có thứ hạng cao trên kết quả tìm kiếm",children:[e.jsxs("label",{htmlFor:"image",className:d("label-inp-img"),children:[e.jsx("span",{className:"material-icons",children:"add_circle"}),"Thêm ảnh..."]}),e.jsx("input",{name:"image",id:"image",type:"file",accept:"image/*",hidden:!0,onChange:l,required:!0})]})]}),e.jsxs("section",{className:"border border-primary-subtle bg-info",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"material-icons text-warning",children:"lock"}),e.jsx("b",{className:"ms-2 text-primary",children:"Chính sách bảo mật thông tin"})]}),e.jsx("hr",{className:"text-primary"}),e.jsxs("p",{children:["Chọn một tên người dùng ",e.jsx("b",{children:"ẩn danh"})]}),e.jsx("input",{type:"text",name:"anonymous",className:"form-control"})]}),e.jsxs("section",{className:"border border-danger bg-danger text-danger d-flex",children:[e.jsx("span",{className:"material-icons fw-bolder",children:"priority_high"}),e.jsx("p",{className:"mb-0",children:"Vì lý do bảo mật, chúng tôi thật sự khuyên bạn nên chọn tên người dùng khác với địa chỉ email của bạn (abc***@gmail.com)"})]}),e.jsxs("section",{className:"border border-warning bg-warning",children:[e.jsx("input",{name:"confirm",id:"confirm",type:"checkbox"}),e.jsx("label",{htmlFor:"confirm",children:"Tôi đã đọc và đồng ý với các điều khoản của BaToPho"}),e.jsx("br",{}),e.jsx(u,{disabled:N,variant:"contained",type:"submit",color:"warning",startIcon:e.jsx(y,{}),children:"Tải lên ngay"})]})]})},V=U;export{V as default};
