import{j as e,c as T,r as l}from"./index-3b93fbf4.js";import{r as b,i as _}from"./createSvgIcon-5a8aadc8.js";import{g as q}from"./get-2920c78f.js";import{p as S}from"./post-7c4aaeec.js";import{B as p}from"./Button-f2040593.js";import"./createSvgIcon-152d8dc1.js";import"./ButtonBase-18bcf650.js";import"./useId-58975782.js";const D="_wrapper_1xvrp_1",I={wrapper:D,"input-group":"_input-group_1xvrp_16","input-group-field":"_input-group-field_1xvrp_27","input-group-info":"_input-group-info_1xvrp_34","label-inp-img":"_label-inp-img_1xvrp_40"};var g={},F=_;Object.defineProperty(g,"__esModule",{value:!0});var h=g.default=void 0,M=F(b()),R=e,O=(0,M.default)((0,R.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");h=g.default=O;var x={},$=_;Object.defineProperty(x,"__esModule",{value:!0});var y=x.default=void 0,z=$(b()),B=e,E=(0,z.default)((0,B.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");y=x.default=E;const u=T.bind(I),s=({title:t,children:n,info:o})=>e.jsxs("div",{className:u("input-group"),children:[e.jsx("label",{htmlFor:n.props?n.props.id??"":"",children:e.jsxs("b",{className:"text-warning",children:[t," ",e.jsx("span",{className:"text-danger",children:n.props&&n.props.required?"*":""})]})}),e.jsx("div",{className:u("input-group-field"),children:n}),o?e.jsx("span",{className:u("input-group-info"),children:o}):null]}),v={title:"",categories:[],description:"",author:"",keywords:[],file:null,image:null},U=()=>{const[t,n]=l.useState(v),[o,f]=l.useState(""),[m,w]=l.useState([]),[k,j]=l.useState(!1),c=a=>{n({...t,[a.target.name]:a.target.type==="file"?a.target.files[0]:a.target.value})};l.useEffect(()=>{q("api/categories").then(a=>w(a))},[]);const N=a=>{a.preventDefault(),j(!0);const r=new FormData;Object.entries(t).map(([i,d]=entry)=>{switch(i){case"file":case"image":r.append(i,d,d.name);break;case"categories":r.append(i,d.map(C=>m[C].id));break;default:r.append(i,d);break}}),S("documents/upload",r).then(i=>{i.status==="200"&&(alert("Upload tài liệu thành công"),n(v),j(!1))})};return e.jsxs("form",{className:u("wrapper"),method:"POST",onSubmit:N,children:[e.jsxs("section",{className:"border border-warning bg-warning",children:[e.jsx(s,{title:"Tên tài liệu",info:"Quyết định 80% SEO",children:e.jsx("input",{type:"text",name:"title",id:"title",className:"form-control",placeholder:"Tối thiểu 10 kí tự",minLength:10,value:t.title,onChange:c,required:!0})}),e.jsxs(s,{title:"Danh mục",info:"",children:[t.categories.map((a,r)=>e.jsx(p,{size:"small",variant:"outlined",endIcon:e.jsx(h,{}),onClick:()=>{n({...t,categories:(()=>(t.categories.splice(r,1),t.categories))()})},children:m[a].name},r)),e.jsxs("select",{name:"categories",id:"categories",className:"form-select",onChange:a=>{n({...t,categories:(()=>(t.categories.push(a.target.value-0),t.categories))()})},required:!0,children:[e.jsx("option",{hidden:!0,children:"--Chọn danh mục--"}),m.map((a,r)=>t.categories.includes(r-0)?null:e.jsx("option",{value:r,children:a.name},r))]})]}),e.jsx(s,{title:"Mô tả ngắn",info:"Tối ưu từ 70 - 200 kí tự",children:e.jsx("textarea",{name:"description",className:"form-control",placeholder:"Tối thiểu 70 kí tự",maxLength:200,value:t.description,onChange:c,required:!0})}),e.jsx(s,{title:"Tác giả",info:"",children:e.jsx("input",{type:"text",name:"author",className:"form-control",placeholder:"Tên tác giả gốc của tài liệu",value:t.author,onChange:c,required:!0})}),e.jsxs(s,{title:"Từ khóa",info:"Tối đa 6 từ khóa",children:[t.keywords.map((a,r)=>e.jsx(p,{size:"small",variant:"outlined",endIcon:e.jsx(h,{}),onClick:()=>{n({...t,keywords:(()=>(t.keywords.splice(r,1),t.keywords))()})},children:a},r)),e.jsxs("div",{className:"d-flex",children:[e.jsx("input",{type:"text",name:"keywords",className:"form-control",placeholder:"Tối thiểu 3 từ khóa",value:o,onChange:a=>{f(a.target.value)}}),e.jsx(p,{className:"ms-2",variant:"contained",onClick:()=>{t.keywords.length<6&&n({...t,keywords:(()=>(t.keywords.push(o.trim(" ")),t.keywords))()}),f("")},children:"Thêm"})]})]}),e.jsx(s,{title:"File tài liệu",info:"Hoàn thành đầy đủ thông tin giúp code của bạn được nhiều người biết đến và có thứ hạng cao trên kết quả tìm kiếm",children:e.jsx("input",{name:"file",id:"file",type:"file",accept:"application/pdf, .pdf, application/msword, .doc, .docx, application/vnd.ms-powerpoint, .ppt, .pptx",onChange:c,required:!0})})]}),e.jsxs("section",{className:"border border-primary-subtle bg-info",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"material-icons text-warning",children:"lock"}),e.jsx("b",{className:"ms-2 text-primary",children:"Chính sách bảo mật thông tin"})]}),e.jsx("hr",{className:"text-primary"}),e.jsxs("p",{children:["Chọn một tên người dùng ",e.jsx("b",{children:"ẩn danh"})]}),e.jsx("input",{type:"text",name:"anonymous",className:"form-control"})]}),e.jsxs("section",{className:"border border-danger bg-danger text-danger d-flex",children:[e.jsx("span",{className:"material-icons fw-bolder",children:"priority_high"}),e.jsx("p",{className:"mb-0",children:"Vì lý do bảo mật, chúng tôi thật sự khuyên bạn nên chọn tên người dùng khác với địa chỉ email của bạn (abc***@gmail.com)"})]}),e.jsxs("section",{className:"border border-warning bg-warning",children:[e.jsx("input",{name:"confirm",id:"confirm",type:"checkbox"}),e.jsx("label",{htmlFor:"confirm",children:"Tôi đã đọc và đồng ý với các điều khoản của BaToPho"}),e.jsx("br",{}),e.jsx(p,{disabled:k,variant:"contained",type:"submit",color:"warning",startIcon:e.jsx(y,{}),children:"Tải lên ngay"})]})]})},J=U;export{J as default};
