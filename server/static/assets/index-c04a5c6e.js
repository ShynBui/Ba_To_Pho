import{j as e,c as N,r as l}from"./index-520559f5.js";import{r as _,i as b}from"./createSvgIcon-5502955f.js";import{g as q}from"./get-c0c567f4.js";import{p as S}from"./post-63836a58.js";import{B as u}from"./Button-8ff82d2d.js";import"./createSvgIcon-9ecacfd3.js";import"./ButtonBase-83d4bc52.js";import"./useId-2a8354c9.js";const D="_wrapper_1xvrp_1",I={wrapper:D,"input-group":"_input-group_1xvrp_16","input-group-field":"_input-group-field_1xvrp_27","input-group-info":"_input-group-info_1xvrp_34","label-inp-img":"_label-inp-img_1xvrp_40"};var g={},F=b;Object.defineProperty(g,"__esModule",{value:!0});var h=g.default=void 0,M=F(_()),R=e,O=(0,M.default)((0,R.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");h=g.default=O;var f={},$=b;Object.defineProperty(f,"__esModule",{value:!0});var k=f.default=void 0,z=$(_()),B=e,E=(0,z.default)((0,B.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");k=f.default=E;const d=N.bind(I),s=({title:t,children:i,info:o})=>e.jsxs("div",{className:d("input-group"),children:[e.jsx("label",{htmlFor:i.props?i.props.id??"":"",children:e.jsxs("b",{className:"text-warning",children:[t," ",e.jsx("span",{className:"text-danger",children:i.props&&i.props.required?"*":""})]})}),e.jsx("div",{className:d("input-group-field"),children:i}),o?e.jsx("span",{className:d("input-group-info"),children:o}):null]}),v={title:"",categories:[],description:"",author:"",keywords:[],file:null},U=()=>{const[t,i]=l.useState(v),[o,x]=l.useState(""),[m,y]=l.useState([]),[w,j]=l.useState(!1),c=r=>{i({...t,[r.target.name]:r.target.type==="file"?r.target.files[0]:r.target.value})};l.useEffect(()=>{q("api/categories").then(r=>y(r))},[]);const C=r=>{r.preventDefault(),j(!0);const a=new FormData;Object.entries(t).map(([n,p]=entry)=>{switch(n){case"file":a.append(n,p,p.name);break;case"categories":a.append(n,p.map(T=>m[T].id));break;default:a.append(n,p);break}}),S("documents/upload",a).then(n=>{n.status==="200"&&(alert("Upload tài liệu thành công"),i(v),j(!1))})};return e.jsxs("form",{className:d("wrapper"),method:"POST",onSubmit:C,children:[e.jsxs("section",{className:"border border-warning bg-warning",children:[e.jsx(s,{title:"Tên tài liệu",info:"Quyết định 80% SEO",children:e.jsx("input",{type:"text",name:"title",id:"title",className:"form-control",placeholder:"Tối thiểu 10 kí tự",minLength:10,value:t.title,onChange:c,required:!0})}),e.jsxs(s,{title:"Danh mục",info:"",children:[t.categories.map((r,a)=>e.jsx(u,{size:"small",variant:"outlined",endIcon:e.jsx(h,{}),onClick:()=>{i({...t,categories:(()=>(t.categories.splice(a,1),t.categories))()})},children:m[r].name},a)),e.jsxs("select",{name:"categories",id:"categories",className:"form-select",onChange:r=>{i({...t,categories:(()=>(t.categories.push(r.target.value-0),t.categories))()})},required:!0,children:[e.jsx("option",{hidden:!0,children:"--Chọn danh mục--"}),m.map((r,a)=>t.categories.includes(a-0)?null:e.jsx("option",{value:a,children:r.name},a))]})]}),e.jsx(s,{title:"Mô tả ngắn",info:"Tối ưu từ 70 - 200 kí tự",children:e.jsx("textarea",{name:"description",className:"form-control",placeholder:"Tối thiểu 70 kí tự",maxLength:200,value:t.description,onChange:c,required:!0})}),e.jsx(s,{title:"Tác giả",info:"",children:e.jsx("input",{type:"text",name:"author",className:"form-control",placeholder:"Tên tác giả gốc của tài liệu",value:t.author,onChange:c,required:!0})}),e.jsxs(s,{title:"Từ khóa",info:"Tối đa 6 từ khóa",children:[t.keywords.map((r,a)=>e.jsx(u,{size:"small",variant:"outlined",endIcon:e.jsx(h,{}),onClick:()=>{i({...t,keywords:(()=>(t.keywords.splice(a,1),t.keywords))()})},children:r},a)),e.jsxs("div",{className:"d-flex",children:[e.jsx("input",{type:"text",name:"keywords",className:"form-control",placeholder:"Tối thiểu 3 từ khóa",value:o,onChange:r=>{x(r.target.value)}}),e.jsx(u,{className:"ms-2",variant:"contained",onClick:()=>{t.keywords.length<6&&i({...t,keywords:(()=>(t.keywords.push(o.trim(" ")),t.keywords))()}),x("")},children:"Thêm"})]})]}),e.jsx(s,{title:"File tài liệu",info:"Hoàn thành đầy đủ thông tin giúp code của bạn được nhiều người biết đến và có thứ hạng cao trên kết quả tìm kiếm",children:e.jsx("input",{name:"file",id:"file",type:"file",accept:"application/pdf, .pdf, application/msword, .doc, .docx, application/vnd.ms-powerpoint, .ppt, .pptx",onChange:c,required:!0})})]}),e.jsxs("section",{className:"border border-info bg-info",children:[e.jsx("input",{name:"confirm",id:"confirm",type:"checkbox"}),e.jsx("label",{htmlFor:"confirm",children:" Tôi đã đọc và đồng ý với các điều khoản của BaToPho"}),e.jsx("br",{}),e.jsx(u,{disabled:w,variant:"contained",type:"submit",color:"primary",startIcon:e.jsx(k,{}),children:"Tải lên ngay"})]})]})},V=U;export{V as default};
